"use strict";(self.webpackChunkmy_doc_site=self.webpackChunkmy_doc_site||[]).push([[1822],{4857:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"documentation/master-server","title":"Master","description":"The Master is a stateless service written in C# that is responsible for linking the client to the appropriate Server Node (SN) during a spawn event, as the client cannot determine its spawn position or the IP address of the SN.","source":"@site/docs/documentation/master-server.md","sourceDirName":"documentation","slug":"/documentation/master-server","permalink":"/docs/documentation/master-server","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/documentation/master-server.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"kubernetes-and-celte","permalink":"/docs/documentation/kubernetes-and-celte"},"next":{"title":"procedure-authority-transfer","permalink":"/docs/documentation/procedure-authority-transfer"}}');var r=n(4848),i=n(8453);const o={},a="Master",c={},d=[{value:"How It Works",id:"how-it-works",level:3}];function l(e){const t={code:"code",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"master",children:"Master"})}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.strong,{children:"Master"})," is a stateless service written in C# that is responsible for linking the ",(0,r.jsx)(t.strong,{children:"client"})," to the appropriate ",(0,r.jsx)(t.strong,{children:"Server Node (SN)"})," during a spawn event, as the client cannot determine its spawn position or the IP address of the SN."]}),"\n",(0,r.jsxs)(t.p,{children:["The Master stores the list of active SNs and connected clients in ",(0,r.jsx)(t.strong,{children:"Redis"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:["It depends on ",(0,r.jsx)(t.strong,{children:"Pulsar"})," for communication with SNs and clients, and ",(0,r.jsx)(t.strong,{children:"Redis"}),' to store the SN and client lists, ensuring the service remains stateless. All predefined "grapes" are stored in a configuration file named ',(0,r.jsx)(t.code,{children:"master-config.yaml"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"grapes:\n    - LeChateauDuMechant\n    - LeChateauDuGentil\n    ...\n"})}),"\n",(0,r.jsx)(t.h3,{id:"how-it-works",children:"How It Works"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"When a New SN Spawns"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["The new SN sends a message to the Pulsar topic ",(0,r.jsx)(t.code,{children:"master.hello.sn"}),"."]}),"\n",(0,r.jsx)(t.li,{children:"The Master adds the new SN to the Redis list of active SNs."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"When a New Client Spawns"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["The client sends a message to the Pulsar topic ",(0,r.jsx)(t.code,{children:"master.hello.client"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["The Master requests one of the SNs to compute the client\u2019s spawn position and assign a chunk using the RPC ",(0,r.jsx)(t.code,{children:"master.rpc"}),"."]}),"\n",(0,r.jsx)(t.li,{children:"Based on the response, the Master redirects the client to the appropriate SN."}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var s=n(6540);const r={},i=s.createContext(r);function o(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);